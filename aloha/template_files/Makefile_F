# ----------------------------------------------------------------------------
#
# Makefile for DHELAS 4.0 library
# Feb. 28, 2001
#
# ----------------------------------------------------------------------------
#
# Use a TAB to precede shell commands (e.g., f90, ar, etc).
# Note: this Makefile uses features that *may not*
# be supported by make utilities other than GNU make.
#
# ----------------------------------------------------------------------------

include ../make_opts

LIBRARY	= libdhelas.$(libext)
LIBDIR  = ../../lib/

BASIC_OBJS = aloha_functions.o

include ./aloha_file.inc

ADDITIONAL_FILE = $(patsubst %.f,%.o,$(wildcard vertex_polynomial.f))
MODULE_FILE     = $(patsubst %.f,%.mod,$(wildcard vertex_polynomial.f))

# Make sure to place the modules directly in the lib directory
FFLAGS += -J$(LIBDIR)

all: $(LIBDIR)$(LIBRARY)

$(LIBDIR)$(LIBRARY): $(BASIC_OBJS) $(ALOHARoutine) $(ADDITIONAL_FILE)
	$(call CREATELIB, $@, $^)

clean:
	$(RM) *.o $(LIBDIR)$(LIBRARY) $(LIBDIR)vertex_polynomial.mod

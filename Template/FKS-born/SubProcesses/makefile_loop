include ../../../Source/make_opts

LIBDIR = ../../../lib/
PROG   = check
LOOPLIB= libMadLoop.a
LINKLIBS =  -L$(LIBDIR) -lcts -ldhelas -lmodel
LIBS =  $(LIBDIR)libcts.$(libext) $(LIBDIR)libdhelas.$(libext) $(LIBDIR)libmodel.$(libext)
PROCESS= loop_matrix.o born_matrix.o loop_num.o CT_interface.o $(patsubst %.f,%.o,$(wildcard helas_calls_*.f)) $(patsubst %.f,%.o,$(wildcard jamp?_calls_*.f))
CHECK  = born_matrix.o 

all: cleanlib $(LOOPLIB) 

$(PROG):  $(PROCESS) $(CHECK) makefile $(LIBS) 
	$(FC) $(FFLAGS) -o $(PROG) $(PROCESS) $(CHECK) $(LINKLIBS)
$(LOOPLIB): $(PROCESS)   
	@ar cr $(LOOPLIB) $(PROCESS)
	mv $(LOOPLIB) ../

clean:
		@rm -f *.o

cleanlib:
	rm -f ../$(LOOPLIB) $(LOOPLIB) $(PROG)

# Note that optimization doesn't work on all machines
g77           = g77
FFLAGS        = -fPIC
LIBRARY	= libcernlib.so
LIBDIR  = ../../lib/
SOURCES = abend.o dlsqp2.o lenocc.o mtlprt.o mtlset.o radmul.o

all: $(LIBDIR)$(LIBRARY)

%.o : %.f makefile
	$(g77) $(FFLAGS) -c $<

$(LIBDIR)$(LIBRARY): $(SOURCES)
	g77 -shared -o $(LIBRARY) $^
	mv $(LIBRARY) $(LIBDIR)